/* Pruned legacy design tokens in favor of Owllocate semantic variables */

/**
 * Envelopes Typography System
 */
@layer base {
  :where(:not(:has([class*=" text-"]), :not(:has([class^="text-"])))) {
    .text-display {
      font-size: var(--text-display);
      line-height: var(--text-display-lh);
      font-weight: var(--font-weight-medium);
    }

    h1,
    .text-h1 {
      font-size: var(--text-h1);
      line-height: var(--text-h1-lh);
      font-weight: var(--font-weight-medium);
    }

    h2,
    .text-h2 {
      font-size: var(--text-h2);
      line-height: var(--text-h2-lh);
      font-weight: var(--font-weight-medium);
    }

    h3 {
      font-size: var(--text-lg);
      font-weight: var(--font-weight-medium);
      line-height: 1.5;
    }

    h4 {
      font-size: var(--text-base);
      font-weight: var(--font-weight-medium);
      line-height: 1.5;
    }

    p,
    .text-body {
      font-size: var(--text-body);
      line-height: var(--text-body-lh);
      font-weight: var(--font-weight-normal);
    }

    .text-caption {
      font-size: var(--text-caption);
      line-height: var(--text-caption-lh);
      font-weight: var(--font-weight-normal);
    }

    .text-mono {
      font-size: var(--text-mono);
      line-height: var(--text-mono-lh);
      font-weight: var(--font-weight-normal);
      font-family: "SF Mono", Monaco, "Cascadia Code", "Roboto Mono", Consolas, "Courier New", monospace;
    }

    label {
      font-size: var(--text-body);
      font-weight: var(--font-weight-medium);
      line-height: var(--text-body-lh);
    }

    button {
      font-size: var(--text-body);
      font-weight: var(--font-weight-medium);
      line-height: var(--text-body-lh);
    }

    input {
      font-size: var(--text-body);
      font-weight: var(--font-weight-normal);
      line-height: var(--text-body-lh);
    }
  }
}

/* Base app surface + typography color driven by semantic vars */
body {
  background: var(--owl-bg);
  color: var(--owl-text-primary);
  -webkit-font-smoothing: antialiased;
  text-rendering: optimizeLegibility;
  transition: background-color .3s ease, color .3s ease;
}

/* Provide consistent default colors for unstyled text elements */
h1,
h2,
h3,
h4,
h5,
h6 {
  color: var(--owl-text-primary);
}

p,
span,
small,
li,
dt,
dd {
  color: inherit;
}

a {
  color: var(--owl-accent);
  text-decoration: none;
}

a:hover {
  color: var(--owl-accent-hover);
  text-decoration: underline;
}

/* Logo specific treatment for contrast subtlety */
img.logo-light {
  filter: drop-shadow(0 1px 1px rgba(0, 0, 0, .25));
}

img.logo-dark {
  filter: drop-shadow(0 1px 1px rgba(255, 255, 255, .08));
}

img[data-theme-logo] {
  image-rendering: -webkit-optimize-contrast;
}

/* High contrast focus outlines relying on focus ring token */
*:focus-visible {
  outline: 2px solid var(--owl-focus-ring);
  outline-offset: 2px;
}

/* Text secondary utility (fallback if component forgot explicit class) */
.text-secondary {
  color: var(--owl-text-secondary);
}

/* Selection colors adapt to theme */
::selection {
  background: var(--owl-accent);
  color: var(--owl-accent-fg);
}

/* Base font sizing optional (removed legacy var references) */

/* Owllocate semantic token fallbacks (single source of truth) */
:root:not([data-theme='dark']) {
  --owl-bg: #FFFFFF;
  --owl-surface: #F5F7FA;
  --owl-surface-alt: #FFFFFF;
  --owl-text-primary: #0E1A2B;
  --owl-text-secondary: #3F4A5F;
  --owl-border: #CAD2DB;
  --owl-accent: #45D0C7;
  /* teal500 */
  --owl-accent-fg: #0B1423;
  /* navy900 */
  --owl-accent-hover: #37C7BC;
  /* teal600 */
  --owl-success: #16A34A;
  --owl-warning: #D97706;
  --owl-error: #DC2626;
  --owl-on-strong: #FFFFFF;
  --owl-focus-ring: #228E86;
  /* Modal specific (light) */
  --owl-modal-bg: #FFFFFF;
  /* Top/bottom allow subtle vertical elevation; top a touch brighter, bottom a touch toned */
  --owl-modal-bg: #FFFFFF;
  /* Increased vertical separation: brighter top, cooler deeper bottom */
  --owl-modal-bg-top: #FFFFFF;
  /* pure white for highlight */
  --owl-modal-bg-bottom: #E1E8F0;
  /* deeper cool tint (was #EEF2F7) */
  /* Slightly stronger/larger shadow for clearer separation in light theme */
  --owl-shadow-modal: 0 6px 28px -6px rgba(0, 0, 0, .18), 0 4px 12px -2px rgba(0, 0, 0, .10), 0 1px 0 rgba(0, 0, 0, .08);
  /* Layered shadow stack incl. tight + mid + ambient + hairline + inset light */
  --owl-shadow-modal: 0 1px 2px rgba(0, 0, 0, .14), 0 3px 6px -1px rgba(0, 0, 0, .12), 0 12px 32px -6px rgba(0, 0, 0, .18), 0 0 0 1px rgba(0, 0, 0, .06), inset 0 0 0 1px rgba(255, 255, 255, .65);
  --owl-shadow-popover: 0 1px 2px rgba(0, 0, 0, .12), 0 4px 12px -2px rgba(0, 0, 0, .14), 0 0 0 1px rgba(0, 0, 0, .05);
  --owl-shadow-sheet: -2px 0 8px -2px rgba(0, 0, 0, .18), -12px 0 32px -8px rgba(0, 0, 0, .12), 0 0 0 1px rgba(0, 0, 0, .05);
  /* Darkened overlay a bit more for stronger dim + increased blur contrast */
  --owl-overlay: rgba(14, 26, 43, 0.55);
  /* Darkened overlay further for stronger dim */
  --owl-overlay: rgba(14, 26, 43, 0.62);
  --owl-popover-bg: #FFFFFF;
  --owl-modal-gloss-opacity: .35;
  --foreground: var(--owl-text-primary);
  --muted: var(--owl-surface);
  --muted-foreground: var(--owl-text-secondary);
  --card: var(--owl-surface-alt);
  --card-foreground: var(--owl-text-primary);
  --popover: var(--owl-modal-bg);
  --popover-foreground: var(--owl-text-primary);
  --primary: var(--owl-accent);
  --primary-foreground: var(--owl-accent-fg);
  --secondary: var(--owl-surface-alt);
  --secondary-foreground: var(--owl-text-primary);
  --accent: var(--owl-accent);
  --accent-foreground: var(--owl-accent-fg);
  --destructive: var(--owl-error);
  --destructive-foreground: var(--owl-on-strong);
  --border: var(--owl-border);
  --input: var(--owl-border);
  --ring: var(--owl-focus-ring);
  --success: var(--owl-success);
  --warning: var(--owl-warning);
  --radius: 0.5rem;
  /* teal800 */
  /* ------------------------------------------------------------------ */
  /* Legacy design token bridge (neutrals & brand) -> new semantic vars */
  /* This allows old components still referencing --color-* tokens to    */
  /* automatically adapt to the active theme without manual refactors.   */
  --color-brand-primary: var(--owl-accent);
  --color-brand-primary-hover: var(--owl-accent-hover);
  --color-neutral-900: var(--owl-text-primary);
  --color-neutral-800: var(--owl-text-primary);
  --color-neutral-700: var(--owl-text-secondary);
  --color-neutral-600: var(--owl-text-secondary);
  --color-neutral-500: var(--owl-text-secondary);
  --color-neutral-400: var(--owl-border);
  --color-neutral-300: var(--owl-border);
  --color-neutral-200: var(--owl-border);
  --color-neutral-100: var(--owl-surface-alt);
  --color-neutral-50: var(--owl-surface);
  --color-success: var(--owl-success);
  --color-warning: var(--owl-warning);
  --color-danger: var(--owl-error);
}

[data-theme='dark'] {
  --owl-bg: #0E1A2B;
  --owl-surface: #122239;
  /* Dark alt surface slightly deepened for clearer elevation layering */
  --owl-surface-alt: #152A45;
  --owl-text-primary: #FFFFFF;
  /* Muted text slightly brightened for readability against deeper alt */
  --owl-text-secondary: #B3BECB;
  --owl-border: #19304C;
  --owl-accent: #45D0C7;
  --owl-accent-fg: #FFFFFF;
  --owl-accent-hover: #8EEAE1;
  --owl-success: #22C55E;
  --owl-warning: #F59E0B;
  --owl-error: #EF4444;
  --owl-on-strong: #FFFFFF;
  --owl-focus-ring: #68DCD4;
  /* Modal specific (dark) - elevated layer slightly lighter than alt */
  --owl-modal-bg: #27486A;
  --owl-modal-bg-top: #326089;
  /* brighter top to imply lift */
  --owl-modal-bg-bottom: #1D354F;
  /* deeper bottom for depth */
  --owl-modal-border: #3B648C;
  /* slightly brighter border */
  --owl-modal-muted: #B3BECB;
  --owl-shadow-modal: 0 1px 2px rgba(0, 0, 0, .55), 0 4px 10px -2px rgba(0, 0, 0, .55), 0 14px 40px -10px rgba(0, 0, 0, .7), 0 0 0 1px rgba(255, 255, 255, .05), inset 0 0 0 1px rgba(255, 255, 255, .06);
  --owl-shadow-popover: 0 1px 2px rgba(0, 0, 0, .5), 0 6px 16px -4px rgba(0, 0, 0, .55), 0 0 0 1px rgba(255, 255, 255, .04);
  --owl-shadow-sheet: -2px 0 10px -2px rgba(0, 0, 0, .6), -14px 0 40px -10px rgba(0, 0, 0, .65), 0 0 0 1px rgba(255, 255, 255, .05);
  --owl-field-bg: #2B4A6B;
  --owl-field-border: #3E5F82;
  --owl-overlay: rgba(8, 15, 25, 0.74);
  --owl-popover-bg: #27486A;
  --owl-modal-gloss-opacity: .12;
  /* Bridge: legacy shadcn-style semantic vars -> owl tokens */
  --background: var(--owl-bg);
  --foreground: var(--owl-text-primary);
  --muted: var(--owl-surface);
  --muted-foreground: var(--owl-text-secondary);
  --card: var(--owl-surface-alt);
  --card-foreground: var(--owl-text-primary);
  --popover: var(--owl-modal-bg);
  --popover-foreground: var(--owl-text-primary);
  --primary: var(--owl-accent);
  --primary-foreground: var(--owl-accent-fg);
  --secondary: var(--owl-surface-alt);
  --secondary-foreground: var(--owl-text-primary);
  --accent: var(--owl-accent);
  --accent-foreground: var(--owl-accent-fg);
  --destructive: var(--owl-error);
  --destructive-foreground: var(--owl-on-strong);
  --border: var(--owl-border);
  --input: var(--owl-border);
  --ring: var(--owl-focus-ring);
  --success: var(--owl-success);
  --warning: var(--owl-warning);
  --radius: 0.5rem;
  /* Legacy token bridge (see light theme block for rationale) */
  --color-brand-primary: var(--owl-accent);
  --color-brand-primary-hover: var(--owl-accent-hover);
  --color-neutral-900: var(--owl-text-primary);
  --color-neutral-800: var(--owl-text-primary);
  --color-neutral-700: var(--owl-text-secondary);
  --color-neutral-600: var(--owl-text-secondary);
  --color-neutral-500: var(--owl-text-secondary);
  --color-neutral-400: var(--owl-border);
  --color-neutral-300: var(--owl-border);
  --color-neutral-200: var(--owl-border);
  --color-neutral-100: var(--owl-surface-alt);
  --color-neutral-50: var(--owl-surface);
  --color-success: var(--owl-success);
  --color-warning: var(--owl-warning);
  --color-danger: var(--owl-error);
}

@media (prefers-color-scheme: dark) {
  :root:not([data-theme='light']) {
    --owl-bg: #0E1A2B;
    --owl-surface: #122239;
    --owl-surface-alt: #152A45;
    --owl-text-primary: #FFFFFF;
    --owl-text-secondary: #B3BECB;
    --owl-border: #19304C;
    --owl-accent: #45D0C7;
    --owl-accent-fg: #FFFFFF;
    --owl-accent-hover: #8EEAE1;
    --owl-success: #22C55E;
    --owl-warning: #F59E0B;
    --owl-error: #EF4444;
    --owl-on-strong: #FFFFFF;
    --owl-focus-ring: #68DCD4;
    --owl-modal-bg: #27486A;
    --owl-modal-bg-top: #326089;
    --owl-modal-bg-bottom: #1D354F;
    --owl-modal-border: #3B648C;
    --owl-modal-muted: #B3BECB;
    --owl-shadow-modal: 0 1px 2px rgba(0, 0, 0, .55), 0 4px 10px -2px rgba(0, 0, 0, .55), 0 14px 40px -10px rgba(0, 0, 0, .7), 0 0 0 1px rgba(255, 255, 255, .05), inset 0 0 0 1px rgba(255, 255, 255, .06);
    --owl-shadow-popover: 0 1px 2px rgba(0, 0, 0, .5), 0 6px 16px -4px rgba(0, 0, 0, .55), 0 0 0 1px rgba(255, 255, 255, .04);
    --owl-shadow-sheet: -2px 0 10px -2px rgba(0, 0, 0, .6), -14px 0 40px -10px rgba(0, 0, 0, .65), 0 0 0 1px rgba(255, 255, 255, .05);
    --owl-field-bg: #2B4A6B;
    --owl-field-border: #3E5F82;
    --owl-overlay: rgba(8, 15, 25, 0.74);
    --owl-popover-bg: #27486A;
    --owl-modal-gloss-opacity: .12;

    --background: var(--owl-bg);
    --foreground: var(--owl-text-primary);
    --muted: var(--owl-surface);
    --muted-foreground: var(--owl-text-secondary);
    --card: var(--owl-surface-alt);
    --card-foreground: var(--owl-text-primary);
    --popover: var(--owl-modal-bg);
    --popover-foreground: var(--owl-text-primary);
    --primary: var(--owl-accent);
    --primary-foreground: var(--owl-accent-fg);
    --secondary: var(--owl-surface-alt);
    --secondary-foreground: var(--owl-text-primary);
    --accent: var(--owl-accent);
    --accent-foreground: var(--owl-accent-fg);
    --destructive: var(--owl-error);
    --destructive-foreground: var(--owl-on-strong);
    --border: var(--owl-border);
    --input: var(--owl-border);
    --ring: var(--owl-focus-ring);
    --success: var(--owl-success);
    --warning: var(--owl-warning);
    --radius: 0.5rem;
  }
}

/* Unified modal gradient surface helper (both themes; tokens differ per theme) */
._owl-modal-solid-fix,
/* internal utility (not exported) */
.owl-modal-surface {
  /* HARD SOLID: remove gradient & any chance of transparency until issue resolved */
  background: var(--owl-modal-bg, #FFFFFF) !important;
  background-color: var(--owl-modal-bg, #FFFFFF) !important;
  background-image: none !important;
  position: relative;
  isolation: isolate;
  /* ensure pseudo overlays don't bleed */
  /* In case a parent sets opacity, counter it locally */
  opacity: 1 !important;
  background-clip: padding-box;
  /* Prevent accidental blending from parent mix-blend-mode */
  mix-blend-mode: normal !important;
}

/* Explicitly neutralize any backdrop/filter/opacity inheritance that could cause translucency */
._owl-modal-solid-fix,
.owl-modal-surface {
  filter: none !important;
  -webkit-backdrop-filter: none !important;
  backdrop-filter: none !important;
}

/* Defensive: if a parent applied opacity via utility (e.g., opacity-90 on Content), reset via higher specificity */
._owl-modal-solid-fix.owl-modal-surface,
.owl-modal-surface.owl-modal-surface {
  opacity: 1 !important;
}

/* KYC progress animations */
@keyframes kycPulse {
  0% {
    box-shadow: 0 0 0 0 rgba(69, 208, 199, 0.0);
  }

  50% {
    box-shadow: 0 0 0 4px rgba(69, 208, 199, 0.25);
  }

  100% {
    box-shadow: 0 0 0 0 rgba(69, 208, 199, 0.0);
  }
}

@keyframes kycConnectorGrow {
  0% {
    width: 0;
  }

  100% {
    width: 100%;
  }
}

.animate-kycPulse {
  animation: kycPulse 1.8s ease-in-out infinite;
}

.animate-kycConnectorGrow {
  animation: kycConnectorGrow 0.9s cubic-bezier(.4, .0, .2, 1) forwards;
}

/* Gloss / subtle top highlight */
/* Previous gradient + gloss moved to optional glass variant */
.owl-modal-surface-glass {
  background: var(--owl-modal-bg, #FFFFFF);
  background-image: linear-gradient(180deg, var(--owl-modal-bg-top, var(--owl-modal-bg, #FFFFFF)) 0%, var(--owl-modal-bg-bottom, var(--owl-modal-bg, #FFFFFF)) 100%);
}

.owl-modal-surface-glass::before {
  content: "";
  position: absolute;
  inset: 0;
  pointer-events: none;
  background:
    linear-gradient(180deg,
      rgba(255, 255, 255, var(--owl-modal-gloss-opacity, 0)) 0%,
      rgba(255, 255, 255, 0) 42%);
  mix-blend-mode: normal;
  border-radius: inherit;
  z-index: 0;
}

/* Debug helper: add class 'owl-modal-debug' on body to force hotpink fill for verification */
.owl-modal-debug .owl-modal-surface {
  background: hotpink !important;
}

/* Popover surface variant (lighter elevation) */
.owl-popover-surface {
  background: var(--owl-popover-bg, var(--owl-modal-bg));
  background: linear-gradient(180deg, var(--owl-popover-bg, var(--owl-modal-bg)) 0%, color-mix(in srgb, var(--owl-popover-bg, var(--owl-modal-bg)) 92%, #000) 100%);
  box-shadow: var(--owl-shadow-popover, var(--owl-shadow-modal));
  position: relative;
  isolation: isolate;
}

/* Mobile-first responsive breakpoints */
@media (min-width: 768px) {
  html {
    font-size: 16px;
    /* Slightly larger on desktop */
  }
}

/* Touch target compliance - minimum 44px */
.touch-target {
  min-height: 44px;
  min-width: 44px;
}